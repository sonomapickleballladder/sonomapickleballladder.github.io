document.addEventListener("DOMContentLoaded",function(){nifnok()&&unfade(document.documentElement,5);try{showLadders()}catch{}try{showActions()}catch{}document.documentElement.style.opacity=0});function showLadders(){let j=lsdciph(localStorage.getItem(brick("$_authenticated_user"+ladderSeason))),ladders;try{ladders=JSON.parse(j.ladder)}catch{ladders=j.ladder}for(let i=0;i<ladders.length;i++){let s="";(laddersOffered[ladders[i]].min==null||laddersOffered[ladders[i]].min>0)&&ladders[i]!="Womens"&&(s="*");let trgt="";laddersOffered[ladders[i]].url.length>3&&(trgt="target=_blank"),s!="*"?byId("my_ladders").innerHTML+=`<a class="nav" ${trgt} href="${laddersOffered[ladders[i]].url}">${ladders[i]} Ladder${s} &#8599;</a>`:byId("my_ladders").innerHTML+=`<a class="nav" style="opacity: 0.75; text-decoration:line-through;" ${trgt}>${ladders[i]} Ladder${s} &#8599;</a>`}}function showActions(){let j=lsdciph(localStorage.getItem(brick("$_authenticated_user"+ladderSeason)));try{j.ladder=JSON.parse(j.ladder)}catch{}byId("actions").innerHTML+=`<p><span style='color: gray'>Signed in as <i>${j.first_name} ${j.last_name}</i></span></p>`,byId("actions").innerHTML+=`<button class="warn" onclick='lgot()'>Sign out</button>`;let test=document.createElement("a");test.href=`login${protoMap[location.protocol]}`,byId("notifications").innerHTML+=`<details><summary>Your Login Link</summary>
  <p>Hi ${j.first_name},<br>You can use this link: <span id='loginlink' class='copy' onclick='copy(this)'>${test.href}?spl=${lsciph("email="+encodeURI(j.email)+"&key="+encodeURI(j.secret_key))}</span> to login.
  <br>Theo<br><br><small>P.S. Please keep track of your secret key! Consider bookmarking or <a href='mailto:${j.email}?subject=Pickleball%20Ladder${ladderSeason.replace(/(_)/g,"%20")}%20|%20Login%20Link&body=I%20can%20use%20this%20link:%20${test}?spl=${lsciph("email="+encodeURI(j.email)+"&key="+encodeURI(j.secret_key))}%20to%20login.'>emailing yourself</a> your login link if you think you might forget it.</small></p></details>`;let emst="",star="";try{j.ladder.toString().toLowerCase().split(",").includes("open")&&(emst="Other ")}catch(ex){console.error(ex)}let plur="",hk=j.ladder;hk.length>1&&(plur="s"),hk.indexOf("Open")>-1&&hk.splice(hk.indexOf("Open"),1),hk.indexOf("Womens")>-1&&hk.splice(hk.indexOf("Womens"),1);let pmap={"":"it",s:"they"},pmap2={"":"doesn't",s:"don't"},nmb=byId("notifications").querySelectorAll("details").length;byId("notifications").querySelector(".under").innerHTML+=` (${nmb})`}function lgot(){if(!confirm("Are you sure?"))return!1;localStorage.removeItem(brick("$_authenticated_user"+ladderSeason));for(let i=0;i<Object.keys(laddersOffered).length;i++){let jld=laddersOffered[Object.keys(laddersOffered)[i]];localStorage.removeItem(jld.ls+"logged_in_user"),localStorage.removeItem(jld.ls+"ArprO_lA3RZxD5z"),localStorage.removeItem(jld.ls+"session6")}location.replace(`login${protoMap[location.protocol]}`)}function toggleDarkMode(t){t?(document.body.classList.remove("light_theme"),document.body.classList.add("dark_theme")):(document.body.classList.remove("dark_theme"),document.body.classList.add("light_theme")),localStorage.setItem(brick("$_darkMode"),t);let map={true:1,false:0};try{byId("loginlink").innerHTML=byId("loginlink").innerText.replace(/(darkmode=1)/g,"").replace(/(darkmode=0)/g,"")+`&darkmode=${map[t]}`,byId("loginlink").innerHTML=byId("loginlink").innerText.replace(/&+/g,"&")}catch{}}