document.addEventListener("DOMContentLoaded",function(){lsWarning(),checkid(),getrankings()});function getrankings(){clearTimeout(getrankings),setTimeout(getrankings,6e4),ptc("rankings","*").then(function(res){try{for(let i=0;i<res.length;i++)bnsuawe.push(res[i].mwbn),wnieai.push(parseInt(res[i].id));awMisen=res.filter(obj=>obj.id===Math.min(...wnieai)),wbicewom=res.filter(obj=>obj.id===Math.max(...wnieai)),awMisen=awMisen[0],awMisen.order=awMisen.order.split(",").map(a=>a.split(":")[0]).toString(),wbicewom=wbicewom[0];let plr=wbicewom.order.split(",");renderorder(wbicewom,plr)}catch{byId("order").innerHTML=`<br><span style='opacity: 0'>Initial Order Creation will be initialized 3 days before the first round starts.</span><br>`,unfade(byId("order").querySelector("span"),15)}})}function renderorder(al,ord){byId("order").innerHTML="";try{byId("goup").removeAttribute("id"),byId("godown").removeAttribute("id")}catch{}let orord=awMisen.order.split(","),hjson=lsdciph(localStorage.getItem(ladderId.ls+"ArprO_lA3RZxD5z")),name=hjson.name.toLowerCase().replace(/(\s)/g,"");for(let i=0;i<ord.length;i++){let orind=orord.indexOf(ord[i]);ord[i]=ord[i].split(":")[0];let controls="";name==ord[i].toLowerCase().replace(/(\s)/g,"")&&checkid()[1]&&(controls=`&nbsp;<button class="cool_button" id="goup" onclick="moveUp(this.parentNode,${i+1},${orind+1})">Up &uarr;</button>&nbsp;<button class="cool_button" id="godown" onclick="moveDown(this.parentNode,${i+1},${orind+1})">Down &darr;</button>`),byId("order").innerHTML+=`<li><span>${ord[i]}</span>${controls}</li>`}colorcodeorder()}window.addEventListener("keydown",function(event){if(event.ctrlKey&&(event.which==40||event.which==39))try{event.preventDefault(),byId("godown").click()}catch{}if(event.ctrlKey&&(event.which==37||event.which==38))try{event.preventDefault(),byId("goup").click()}catch{}});function moveUp(element,p1,p0){if(element.previousElementSibling){let vert=Array.from(element.parentNode.children).indexOf(element)-p0,indchange=Math.abs(vert);if(-maxmove>vert)return!1;element.parentNode.insertBefore(element,element.previousElementSibling),colorcodeorder()}}function moveDown(element,p1,p0){if(element.nextElementSibling){let vert=Array.from(element.parentNode.children).indexOf(element)-p0+2,indchange=Math.abs(vert);if(vert>maxmove)return!1;element.parentNode.insertBefore(element.nextElementSibling,element),colorcodeorder()}}let clrsup=["auto","#ffc285","#ffbb7e","#ffb478","#ffad71","#ffa56a","#ff9e64","#ff975d","#ff9056","#ff8950","#ff8249","#ff7a42","#ff733c","#ff6c35","#ff652f","#ff5e28","#ff5721","#ff501b","#ff4814","#ff410d","#ff3a07","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300","#ff3300"],clrsdown=["auto","#ccccff","#c9c4ff","#c7bdff","#c4b5ff","#c2adff","#bfa6ff","#bd9eff","#ba96ff","#b88fff","#b587ff","#b280ff","#b078ff","#ad70ff","#ab69ff","#a861ff","#a659ff","#a352ff","#a14aff","#9e42ff","#9c3bff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff","#9933ff"];const maxmove=20;let wbicewom,awMisen,bnsuawe=[],wnieai=[];async function ptc(t,e,c,n,a,i,r){const{data:o,error:u}=await sb.client.from(init.f_e+ladderId.sb+t).select(e);u&&debug;try{executeFunctionByName(r,window,o)}catch{return o}}function checkid(){document.activeElement.blur();try{if(lsdciph(localStorage.getItem(ladderId.ls+"ArprO_lA3RZxD5z"))){let hjson=lsdciph(localStorage.getItem(ladderId.ls+"ArprO_lA3RZxD5z")),v=hjson.name.replace(/(\s)/g,"").toLowerCase(),sk=hjson.key,gme=v+sk,aawe=sha256(gme);return hide(0),[{error:502},!0,{kwm:aawe}]}location.replace(`../login${protoMap[location.protocol]}?return_to=${location.pathname}`)}catch{alert("Something went wrong..."),location.replace(`../login${protoMap[location.protocol]}?return_to=${location.pathname}`)}}function savethisorder(){let hjson=lsdciph(localStorage.getItem(ladderId.ls+"ArprO_lA3RZxD5z")),nord=byId("order").children,narr=[];for(let i=0;i<nord.length;i++){let kj=nord[i].getElementsByTagName("span")[0].innerHTML;narr.push(kj)}let norder=narr.toString();if(norder==wbicewom.order)return calert(0,"Error","Order has not changed",0),!1;let smogp={order:norder,Fz_id:checkid()[2].kwm,mwbn:LZString.compressToUTF16(hjson.name)};saveData("rankings",smogp).then(function(){location.reload()})}function colorcodeorder(){let hjson=lsdciph(localStorage.getItem(ladderId.ls+"ArprO_lA3RZxD5z")),amk=byId("order").children,orord=awMisen.order.split(",").map(a=>a.split(":")[0]);for(let i=0;i<amk.length;i++){let element=amk[i],nm=element.getElementsByTagName("span")[0].innerHTML,lzmn=LZString.compressToUTF16(nm.toLowerCase().replace(/(\s)/g,"")),p0=orord.indexOf(nm),vert=Array.from(element.parentNode.children).indexOf(element)-p0,namespan=element.getElementsByTagName("span")[0];if(bnsuawe.indexOf(lzmn)>-1||hjson.name.toLowerCase().replace(/(\s)/g,"")==nm.toLowerCase().replace(/(\s)/g,"")&&checkid()[1]){let indchange=Math.abs(vert);vert>0&&(indchange=Math.abs(vert+2));let inp=document.createElement("input");vert<0&&(namespan.style.backgroundColor=clrsup[indchange]),vert>0&&(namespan.style.backgroundColor=clrsdown[indchange]),vert==0&&(namespan.style.backgroundColor="")}let tg="small";clearel(element,tg);let newNode=document.createElement(tg),invrt=JSON.stringify(-vert);parseInt(vert)==0&&(invrt=""),invrt.indexOf("-")>-1?invrt=invrt.replace(/-/g,"")+"⇓":invrt.length>0&&(invrt=invrt+"⇑"),newNode.innerHTML=` ${invrt} `,namespan.parentNode.insertBefore(newNode,namespan.nextSibling)}}function clearel(pr,el){for(var list=pr.getElementsByTagName(el),k=list.length-1;k>=0;k--){var item=list[k];item.parentNode.removeChild(item)}}