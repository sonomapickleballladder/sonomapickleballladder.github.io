document.addEventListener("DOMContentLoaded",function(){cusInp(),rdFrstNm(),jsFill(),retainvals();try{byId("wkcalc").value=`Round ${getRound()?getRound():1}`,byId("wkcalc").innerHTML=`Round ${getRound()?getRound():1}`}catch{}let rnd=getRound();try{autofillRound(rnd,"current"),autofillRound(rnd,"next")}catch{}});function cusInp(){try{let cus=byAttr("prompt");for(let i=0;i<cus.length;i++)cus[i].addEventListener("click",function(){try{dgprompt(cus[i].getAttribute("prompt"),function(val){try{if(Boolean(val)&&val.trim().length>60)return alert("Input is too long"),!1}catch{}try{Boolean(val)&&val.trim().length>0&&(cus[i].innerHTML=val,cus[i].classList.add("valid"))}catch{}Boolean(val)&&val.trim().length>0&&Boolean(unundefine(cus[i].getAttribute("prepend")))&&cus[i].innerHTML.indexOf(cus[i].getAttribute("prepend"))<0&&(cus[i].innerHTML=cus[i].getAttribute("prepend")+cus[i].innerHTML),Boolean(val)&&val.trim().length>0&&Boolean(unundefine(cus[i].getAttribute("append")))&&cus[i].innerHTML.indexOf(cus[i].getAttribute("append"))<0&&(cus[i].innerHTML+=cus[i].getAttribute("append"))})}catch{let dg=document.createElement("input");dg.classList.add("subinput"),dg.value=cus[i].innerText.replace(/(\(click to edit\))/g,""),cus[i].replaceWith(dg)}})}catch{}}function rdFrstNm(){try{let randname=byAttr("randomname");for(let i=0;i<randname.length;i++){let uy=createPersonName();randname[i].innerHTML=uy,Boolean(randname[i].getAttribute("apnd"))&&(randname[i].innerHTML+=randname[i].getAttribute("apnd"));try{byAttr("randomemail",randname[i].getAttribute("dataid")).length>0&&(byAttr("randomemail")[0].innerHTML=createEmail(uy))}catch(ex){console.error(ex)}}}catch{}}function vrfrd(){let nrd=getRound(),g=byId("round").value,tx=g.replace(/[0-9]/g,""),prd=parseInt(g.replace(tx,""));if(nrd!=nrd)return event.preventDefault(),calert(!1,"Hang on!","This form is currently disabled as this Ladder season is not yet active (or has finished). It will be enabled "+Math.abs(frstC+2)+" days before the first round starts.","notice",0,0,0,0,"1.5em"),!1;if(prd<nrd)return event.preventDefault(),calert(!1,"Error","You cannot offer to be a sub for a previous round.","error",0,0,0,0,"1.5em"),!1;if(prd>nrd+1)return event.preventDefault(),calert(!1,"Error","You may only  offer to be a sub for the current or next Round. Please wait until "+byId("round").children[byId("round").selectedIndex-1].value+" to submit this form for "+byId("round").value+".","error",0,0,0,0,"1.5em"),!1;postInfo()}function vrfid(){let ussr="";event.preventDefault();try{ussr=localStorage.getItem(ladderId.ls+"aeloMidneufdaNiNaN").tags.swoma9hsofeK.ussr}catch{}}function postInfo(){let fake="(click to edit)",blank="(click to add)",real="(click to update)",unwntd=/[()]/g,unfake=new RegExp(fake,"g"),unreal=new RegExp(real,"g"),unblank=new RegExp(blank,"g"),round=parseInt(byId("round").value.split(" ").pop().trim()),name=byId("name").innerText,email=byId("email").innerText,phone=byId("phone").innerText,skill=byId("skill").innerText,in_ladder=byId("inladder").checked,already_playing=byId("inround").checked,week1days=byId("w1days").innerText,week2days=byId("w2days").innerText;if(name.indexOf(fake)>-1)return calert(0,"Error","You may not use an auto-generated name to submit this form. Please provide your real name."),!1;if(email.indexOf(fake)>-1)return calert(0,"Error","You may not use an auto-generated email to submit this form. Please provide your real email."),!1;if(phone.indexOf(blank)>-1&&(phone=phone.replace(unblank,"")),skill.indexOf(fake)>-1)return calert(0,"Error","You may not use an auto-generated skill level to submit this form. Please provide your real skill level."),!1;if(week1days.indexOf(fake)>-1&&(week1days=""),week2days.indexOf(fake)>-1&&(week2days=""),name=name.replace(unreal,"").replace(unwntd,"").trim(),email=email.replace(unreal,"").replace(unwntd,"").trim(),phone=phone.replace(unreal,"").replace(unwntd,"").trim(),skill=skill.replace(unreal,"").replace(unwntd,"").trim(),week1days=week1days.replace(unreal,"").replace(unwntd,"").trim(),week2days=week2days.replace(unreal,"").replace(unwntd,"").trim(),disallow(name)||localStorage.getItem(ladderId.ls+"unauthorized"))return calert(!0,"Error",`You are not authorized ${name}.`,"error"),localStorage.setItem(ladderId.ls+"unauthorized",!0),!1;if(!validateEmail(email))return calert(0,"Error","The email you provided is not a valid email"),byId("email").classList.remove("valid"),!1;let injson={round,name,email,phone,skill,in_ladder,already_playing,week1days,week2days};try{saveData("subs",injson).then(function(res){res.error?calert(0,"Error","Form submission failed for unknown reasons.","error"):(document.body.innerHTML="Success! You will be redirected back to the Subs Page momentarily.",copyData(injson),setTimeout(function(){location.replace("subs.html")},3e3))})}catch{}}function copyData(j){let uznj,akwo="subCredentials;";try{localStorage.setItem(ladderId.ls+akwo,lsciph(j))}catch{}}function retainvals(){let akwo="subCredentials;",lscrds=lsdciph(localStorage.getItem(ladderId.ls+akwo));if(lscrds){{let yg=lscrds;if(yg)try{let up="(click to update)",few=["name","email","phone","skill"];for(let i=0;i<few.length;i++)try{let m=yg[few[i]];Boolean(m)&&(byId(few[i]).innerHTML=`${m} ${up}`,byId(few[i]).classList.add("valid"))}catch{}byId("inladder").checked=yg.in_ladder,byId("inladder").previousElementSibling.innerHTML=map[byId("inladder").checked]}catch(ex){console.log(ex)}}}else{let yg=lsdciph(localStorage.getItem(brick("$_authenticated_user"+ladderSeason)),0,laddersOffered.Open.ls);if(yg){yg.name=`${yg.first_name} ${yg.last_name}`,yg.email=yg.email.replace(`+_${ladderSeasonNameLowercase}_${ladderYear}`,""),yg.DUPR?yg.skill=yg.DUPR:yg.Self_Rating&&(yg.skill=yg.Self_Rating),console.log(yg);try{let up="(click to update)",few=["name","email","phone","skill"];for(let i=0;i<few.length;i++)try{let m=yg[few[i]];Boolean(m)&&(byId(few[i]).innerHTML=`${m} ${up}`,byId(few[i]).classList.add("valid"))}catch{}lsdciph(localStorage.getItem(ladderId.ls+"logged_in_user"))&&(byId("inladder").checked=!0,byId("inladder").previousElementSibling.innerHTML=map[byId("inladder").checked])}catch{}}}}const map={true:"Yes",false:"No"},unmap={Yes:!0,No:!1}