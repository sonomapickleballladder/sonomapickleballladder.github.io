document.addEventListener("DOMContentLoaded",function(){nifnok()&&unfade(document.documentElement,5);try{showLadders()}catch{}try{showActions()}catch{}document.documentElement.style.opacity=0});function showLadders(){let j=lsdciph(localStorage.getItem(brick("$_authenticated_user"+ladderSeason))),ladders;try{ladders=JSON.parse(j.ladder)}catch{ladders=j.ladder}for(let i=0;i<ladders.length;i++){let s="";(laddersOffered[ladders[i]].min==null||laddersOffered[ladders[i]].min>0)&&ladders[i]!="Womens"&&(s="*");let trgt="";laddersOffered[ladders[i]].url.length>3&&(trgt="target=_blank"),s!="*"?byId("my_ladders").innerHTML+=`<a class="nav" ${trgt} href="${laddersOffered[ladders[i]].url}">${ladders[i]} Ladder${s} &#8599;</a>`:byId("my_ladders").innerHTML+=`<a class="nav" style="opacity: 0.75; text-decoration:line-through;" ${trgt}>${ladders[i]} Ladder${s} &#8599;</a>`}}function showActions(){let j=lsdciph(localStorage.getItem(brick("$_authenticated_user"+ladderSeason)));try{j.ladder=JSON.parse(j.ladder)}catch{}byId("actions").innerHTML+=`<p><span style='color: gray'>Signed in as <i>${j.first_name} ${j.last_name}</i></span></p>`,byId("actions").innerHTML+=`<button class="warn" onclick='lgot()'>Sign out</button>`;let test=document.createElement("a");test.href=`login${protoMap[location.protocol]}`,byId("notifications").innerHTML+=`<details><summary>Your Login Link</summary>
  <p>You can use this link: <span id='loginlink' class='copy' onclick='copy(this)'>${test}?spl=${lsciph("email="+encodeURI(j.email)+"&key="+encodeURI(j.secret_key))}</span> to login.
  <br>Theo<br><br><small>P.S. Please keep track of your secret key! Consider bookmarking or <a href='mailto:${j.email}?subject=Pickleball%20Ladder${ladderSeason.replace(/(_)/g,"%20")}%20|%20Login%20Link&body=I%20can%20use%20this%20link:%20${test}?spl=${lsciph("email="+encodeURI(j.email)+"&key="+encodeURI(j.secret_key))}%20to%20login.'>emailing yourself</a> your login link if you think you might forget it.</small></p></details>`,byId("notifications").innerHTML+=`<details><summary>Your Invite Code</summary>
  <p>You can use this code: <span class='code' id='inviteCode'>${j.invite_code}</span> 
<span onclick="copy(byId('inviteCode'), 0, this)"><clipboard-copy aria-label="Copy" role="button"> <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon"> <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path> </svg> </clipboard-copy></span>.
  to refer friends and get a discounted registration fee (see <a href='signup${protoMap[location.protocol]}'>Signup page</a> for more details).
  </p></details>`;let emst="",star="";try{j.ladder.toString().toLowerCase().split(",").includes("open")&&(emst="Other ")}catch(ex){console.error(ex)}let plur="",hk=j.ladder;hk.length>1&&(plur="s"),hk.indexOf("Open")>-1&&hk.splice(hk.indexOf("Open"),1),hk.indexOf("Womens")>-1&&hk.splice(hk.indexOf("Womens"),1);let pmap={"":"it",s:"they"},pmap2={"":"doesn't",s:"don't"},nmb=byId("notifications").querySelectorAll("details").length;byId("notifications").querySelector(".under").innerHTML+=` (${nmb})`}function lgot(){if(!confirm("Are you sure?"))return!1;localStorage.removeItem(brick("$_authenticated_user"+ladderSeason));for(let i=0;i<Object.keys(laddersOffered).length;i++){let jld=laddersOffered[Object.keys(laddersOffered)[i]];localStorage.removeItem(jld.ls+"logged_in_user"),localStorage.removeItem(jld.ls+"ArprO_lA3RZxD5z"),localStorage.removeItem(jld.ls+"session6")}location.replace(`login${protoMap[location.protocol]}`)}function toggleDarkMode(t){t?(document.body.classList.remove("light_theme"),document.body.classList.add("dark_theme")):(document.body.classList.remove("dark_theme"),document.body.classList.add("light_theme")),localStorage.setItem(brick("$_darkMode"),t);let map={true:1,false:0};try{byId("loginlink").innerHTML=byId("loginlink").innerText.replace(/(darkmode=1)/g,"").replace(/(darkmode=0)/g,"")+`&darkmode=${map[t]}`,byId("loginlink").innerHTML=byId("loginlink").innerText.replace(/&+/g,"&")}catch{}}